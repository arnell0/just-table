import a from'react';var{keys:b}=Object,{isArray:c}=Array;import'./styles.css';function d(A){var{values:_,setValues:B}=A,[D,E]=a.useState(''),[F,G]=a.useState(_.length),H=e=>{const C=e.target.value,_c=[..._];E(C);if(C!=='')if(A.fuzzySearch){let _a=[],_b=[..._a].sort((a,b)=>b-a);_c=_c.filter(row=>row.some(_A=>{const _B=f(_A.toString().toLowerCase(),C.toLowerCase());_a.push(_B);return _B>0.5}));_c=_c.sort((a,b)=>{const _C=_a.indexOf(_b.find(item=>item==_a[_a.indexOf(a)])),_d=_a.indexOf(_b.find(item=>item==_a[_a.indexOf(b)]));return _C-_d})}else _c=_c.filter(row=>row.some(value=>value.toString().toLowerCase().includes(C.toLowerCase())));B(_c);G(_c.length)};return a.createElement("div",{className:"retable-search-box",style:{display:'flex',justifyContent:'flex-start',alignItems:'center',gap:'5px'}},a.createElement("input",{type:"text",placeholder:A.fuzzySearch?'Fuzzy search...':'Search...',value:D,onChange:H,className:"retable-search-box-input",style:{padding:'8px',border:'1px solid #ccc'}}),a.createElement("span",{className:"retable-search-box-result"}," ",F," results"))}function e(A){var[_,B]=a.useState({fullWidth:!0,autoGenerateColumns:!0,pagination:!0,paginationSize:10,search:!0,fuzzySearch:!1,stickyHeader:!0,stickyFooter:!0}),[D,E]=a.useState([]),[F,G]=a.useState([]),[H,i]=a.useState([]),[j,k]=a.useState(1),[l,m]=a.useState(1),[n,o]=a.useState({column:'',order:'desc'}),p=data=>data.map(item=>Object.values(item).map(C=>{if(c(C))return JSON.stringify(C);return C})),s=(C,_b,_c)=>{let _d=_.paginationSize;_c!==void 0&&(_d=_c);_b=_b.slice((C-1)*_d,C*_d);k(C);i(_b)},u=C=>{s(1,C);G(C)},v=C=>{let _b=[...F],_c={...n},_d=D.indexOf(C);C==n.column?_c.order=n.order=='asc'?'desc':'asc':_c.column=C;o(_c);_b.sort((a,b)=>{if(a[_d]<b[_d])return _c.order=='asc'?-1:1;if(a[_d]>b[_d])return _c.order=='asc'?1:-1;return 0});s(1,_b);G(_b)};a.useEffect(()=>m(Math.ceil(F.length/_.paginationSize)),[F]);a.useEffect(()=>{var{data:C}=A,_b={},_c=[],_d=p(C);if(C==void 0||!C.length)throw Error('Data must be provided');for(const _a of b(_))A[_a]!==void 0?_b[_a]=A[_a]:_b[_a]=_[_a];B(_b);if(_b.autoGenerateColumns){_c=b(C[0]);for(const[_a,_B] of _c.entries())_c[_a]=_B.split('_').join(' ').replace(/([A-Z])/g,' $1').split('-').join(' ').split(' ').map(word=>word.charAt(0).toUpperCase()+word.slice(1)).join(' ')}else{if(A.columns==void 0||!A.columns.length)throw Error('Columns must be provided');_c=A.columns}E(_c);G([..._d]);_b.pagination&&(_d=_d.slice((j-1)*_b.paginationSize,j*_b.paginationSize));i(_d);console.log(g('Hello World',['Helo Wrld','Hello World','Hello World!']))},[A]);return a.createElement("div",{className:"retable-table-wrapper"},a.createElement("table",{className:"retable-table",style:{width:_.fullWidth?'100%':'auto'}},a.createElement("thead",{className:"retable-thead"},_.search&&a.createElement("tr",{className:"retable-thead-tr"},a.createElement("td",{className:"retable-thead-tr-td",colSpan:D.length},a.createElement(d,{values:p(A.data),setValues:u,fuzzySearch:_.fuzzySearch})))),a.createElement(()=>a.createElement("thead",{className:"retable-thead",style:{position:_.stickyHeader?'sticky':'relative',top:"-1px"}},a.createElement("tr",{className:"retable-thead-tr"},D.length>0&&D.map((column,index)=>a.createElement("th",{className:"retable-thead-tr-td",key:index,onClick:()=>v(column),style:{cursor:'pointer',userSelect:'none'}},column,n.column==column?a.createElement("span",{className:"retable-thead-tr-td-sort"},n.order=='asc'?'▲':'▼'):a.createElement("span",{className:"retable-thead-tr-td-sort",style:{color:'transparent'}},"\u25B2"))))),null),a.createElement(()=>a.createElement("tbody",{className:"retable-tbody"},H.length>0&&H.map((row,index)=>a.createElement("tr",{className:"retable-tbody-tr",key:index},row.map((value,index)=>a.createElement("td",{className:"retable-tbody-tr-td",key:index},value))))),null),a.createElement(()=>{var{pagination:C}=_,_B=newPage=>s(newPage,[...F]),_C=_A=>{m(Math.ceil(F.length/_A));const _b={..._};_b.paginationSize=_A;B(_b);s(1,[...F],_A)};if(!C)return null;return a.createElement("tfoot",{className:"retable-tfoot",style:{position:_.stickyFooter?'sticky':'relative',bottom:"-1px"}},a.createElement("tr",{className:"retable-tfoot-tr"},a.createElement("td",{className:"retable-tfoot-tr-td",colSpan:D.length},a.createElement("div",{className:"retable-pagination",style:{display:'flex',justifyContent:'flex-end',alignItems:'center',gap:'5px'}},a.createElement("span",{className:"retable-pagination-page"},"Rows per page: "),a.createElement("select",{className:"retable-pagination-select",onChange:e=>_C(e.target.value),value:_.paginationSize},[5,10,20,50,100].map((value,index)=>a.createElement("option",{key:index,value:value},value))),a.createElement("span",{className:"retable-pagination-page"},j,"/",l," "),a.createElement("button",{className:"retable-pagination-button",onClick:()=>_B(1),disabled:j==1},"<<"),a.createElement("button",{className:"retable-pagination-button",onClick:()=>_B(j-1),disabled:j==1},"<"),a.createElement("button",{className:"retable-pagination-button",onClick:()=>_B(j+1),disabled:j==l},">"),a.createElement("button",{className:"retable-pagination-button",onClick:()=>_B(l),disabled:j==l},">>")))))},null)))}export default e;function f(A,_){A=A.replace(/\s+/g,'');_=_.replace(/\s+/g,'');if(A==_)return 1;if(A.length<2||_.length<2)return 0;let B=new Map(),D=0;for(let i=0;i<A.length-1;i++){var C=A.substring(i,i+2),_b=B.has(C)?B.get(C)+1:1;B.set(C,_b)};for(let i=0;i<_.length-1;i++){var _a=_.substring(i,i+2),_B=B.has(_a)?B.get(_a):0;_B>0&&(B.set(_a,_B-1),D++)}return 2.0*D/(A.length+_.length-2)}function g(A,_){if(!h(A,_))throw Error('Bad arguments: First argument should be a string, second should be an array of strings');var B=[],D=0,E=B[D];for(const[i,C] of _.entries()){var _a=f(A,C);B.push({target:C,rating:_a});_a>B[D].rating&&(D=i)}return{ratings:B,bestMatch:E,bestMatchIndex:D}}function h(A,_){if(typeof A!=='string')return!1;if(!c(_))return!1;if(!_.length)return!1;if(_.find(s=>typeof s!=='string'))return!1;return!0}
