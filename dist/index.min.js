import a from'react';var{keys:b}=Object,{isArray:c}=Array,d=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",class:"sbui-icon "},a.createElement("polyline",{points:"15 3 21 3 21 9"}),a.createElement("polyline",{points:"9 21 3 21 3 15"}),a.createElement("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),a.createElement("line",{x1:"3",y1:"21",x2:"10",y2:"14"})),e=a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round",class:"sbui-icon"},a.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),a.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}));import'./styles.css';function f(A){var{values:_,setValues:B}=A,[D,E]=a.useState(''),[F,G]=a.useState(_.length),h=e=>{let C=e.target.value,_c=[..._];E(C);C!==''&&(_c=_c.filter(row=>row.some(value=>value.toString().toLowerCase().includes(C.toLowerCase()))));B(_c);G(_c.length)};return a.createElement("div",{class:"just-search-box",style:{display:'flex',justifyContent:'flex-start',alignItems:'center',gap:'5px'}},a.createElement("input",{type:"text",placeholder:"Search...",value:D,onInput:h,style:{padding:'8px',border:'1px solid #ccc'}}),a.createElement("span",null," ",F," results"))}function g(A){var[_,B]=a.useState({fullWidth:!0,autoGenerateColumns:!0,pagination:!0,paginationSize:10,search:!0,stickyHeader:!0,stickyFooter:!0,onRowClick:()=>{},onColumnClick:()=>{},onColumnCreate:()=>{}}),[D,E]=a.useState([]),[F,G]=a.useState([]),[h,i]=a.useState([]),[j,k]=a.useState(1),[l,m]=a.useState(1),[n,o]=a.useState({column:'',order:'desc'}),p=data=>data.map(item=>Object.values(item).map(C=>{if(c(C))return JSON.stringify(C);return C})),q=column=>_.onColumnClick(column),r=()=>_.onColumnCreate(),t=C=>{let _b=F.findIndex(baseRow=>baseRow==C);if(_b==-1)return;A.onRowClick(A.data[_b])},u=()=>A.onRowCreate(),w=(C,_b,_c)=>{let _d=_.paginationSize;_c!==void 0&&(_d=_c);_b=_b.slice((C-1)*_d,C*_d);k(C);i(_b)},y=C=>{w(1,C);G(C)},z=C=>{let _b=[...F],_c={...n},_d=D.indexOf(C);C==n.column?_c.order=n.order=='asc'?'desc':'asc':_c.column=C;o(_c);_b.sort((a,b)=>{if(a[_d]<b[_d])return _c.order=='asc'?-1:1;if(a[_d]>b[_d])return _c.order=='asc'?1:-1;return 0});w(1,_b);G(_b)};a.useEffect(()=>m(Math.ceil(F.length/_.paginationSize)),[F]);a.useEffect(()=>{var{data:C}=A,_b={},_c=[],_d=p(C);if(C==void 0||!C.length)throw Error('Data must be provided');for(let _a of b(_))A[_a]!==void 0?_b[_a]=A[_a]:_b[_a]=_[_a];B(_b);if(_b.autoGenerateColumns&&!A.columns.length){_c=b(C[0]);for(let[_a,_B] of _c.entries())_c[_a]=_B.split('_').join(' ').replace(/([A-Z])/g,' $1').split('-').join(' ').split(' ').map(word=>word.charAt(0).toUpperCase()+word.slice(1)).join(' ')}else{if(A.columns==void 0||!A.columns.length)throw Error('Columns must be provided');_c=A.columns}E(_c);G([..._d]);_b.pagination&&(_d=_d.slice((j-1)*_b.paginationSize,j*_b.paginationSize));i(_d)},[A]);return a.createElement("div",{class:"just-wrapper"},a.createElement("table",{class:"just-table",style:{width:_.fullWidth?'100%':'auto'}},a.createElement("thead",null,_.search&&a.createElement("tr",null,a.createElement("td",{colSpan:D.length+1},a.createElement("div",{style:{display:'flex',alignItems:'center',gap:'20px'}},a.createElement(f,{values:p(A.data),setValues:y}),a.createElement("button",{variant:"contained",color:"success",onClick:u,size:"slim"},"Insert row"))))),a.createElement(()=>a.createElement("thead",{style:{position:_.stickyHeader?'sticky':'relative'}},a.createElement("tr",null,a.createElement("th",null,a.createElement("div",null,a.createElement("input",{type:"checkbox",name:"",id:""}))),D.length>0&&D.map((column,index)=>a.createElement("th",{key:index},a.createElement("div",null,a.createElement("div",null,a.createElement("div",{onClick:()=>z(column)},column," \xA0"),n.column==column&&a.createElement("div",null,n.order=='asc'?'↑':'↓')),a.createElement("div",{class:"icon expand",onClick:()=>q(column)},d)))),a.createElement("th",null,a.createElement("div",{style:{justifyContent:'center'}},a.createElement("div",{class:"icon expand",onClick:r},e))))),null),a.createElement(()=>a.createElement("tbody",null,h.length>0&&h.map((row,index)=>a.createElement("tr",{key:index},a.createElement("td",null,a.createElement("input",{type:"checkbox",name:"",id:""}),a.createElement("div",{class:"icon expand",onClick:()=>-t(row)},d)),row.map((value,index)=>a.createElement("td",{key:index},value)),a.createElement("td",null))),a.createElement("tr",null,a.createElement("td",null,a.createElement("div",{style:{margin:'0 auto'}},a.createElement("div",{class:"icon expand",onClick:u},e))),D.length>0&&D.map((column,index)=>a.createElement("td",{key:index})))),null),a.createElement(()=>{var{pagination:C}=_,_B=newPage=>w(newPage,[...F]),_C=_A=>{m(Math.ceil(F.length/_A));let _b={..._};_b.paginationSize=_A;B(_b);w(1,[...F],_A)};if(!C)return null;return a.createElement("tfoot",{style:{position:_.stickyFooter?'sticky':'relative',bottom:"-1px"}},a.createElement("tr",null,a.createElement("td",{colSpan:D.length+1},a.createElement("div",{style:{display:'flex',justifyContent:'flex-end',alignItems:'center',gap:'5px'}},a.createElement("span",null,"Rows per page: "),a.createElement("select",{onChange:e=>_C(e.target.value),value:_.paginationSize},[5,10,20,50,100].map((value,index)=>a.createElement("option",{key:index,value:value},value))),a.createElement("span",null,j,"/",l," "),a.createElement("button",{onClick:()=>_B(1),disabled:j==1},"<<"),a.createElement("button",{onClick:()=>_B(j-1),disabled:j==1},"<"),a.createElement("button",{onClick:()=>_B(j+1),disabled:j==l},">"),a.createElement("button",{onClick:()=>_B(l),disabled:j==l},">>")))))},null)))}export default g;
